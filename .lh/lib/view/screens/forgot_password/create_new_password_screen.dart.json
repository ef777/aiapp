{
    "sourceFile": "lib/view/screens/forgot_password/create_new_password_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1667569434817,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1667569434817,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\nimport 'package:ainsighter/helper/responsive_helper.dart';\nimport 'package:ainsighter/helper/route_helper.dart';\nimport 'package:ainsighter/localization/language_constrants.dart';\nimport 'package:ainsighter/provider/auth_provider.dart';\nimport 'package:ainsighter/utill/color_resources.dart';\nimport 'package:ainsighter/utill/config.dart';\nimport 'package:ainsighter/utill/dimensions.dart';\nimport 'package:ainsighter/utill/images.dart';\nimport 'package:ainsighter/utill/styles.dart';\nimport 'package:ainsighter/view/base/custom_app_bar.dart';\nimport 'package:ainsighter/view/base/custom_button.dart';\nimport 'package:ainsighter/view/base/custom_secondary_button.dart';\nimport 'package:ainsighter/view/base/custom_snackbar.dart';\nimport 'package:ainsighter/view/base/custom_text_field.dart';\nimport 'package:ainsighter/view/base/main_app_bar.dart';\nimport 'package:flutter_svg/svg.dart';\nimport 'package:provider/provider.dart';\n\nclass CreateNewPasswordScreen extends StatelessWidget {\n  final String resetToken;\n  final String email;\n\n  CreateNewPasswordScreen({@required this.resetToken, @required this.email});\n\n  final TextEditingController _passwordController = TextEditingController();\n  final TextEditingController _confirmPasswordController =\n      TextEditingController();\n  final FocusNode _passwordFocus = FocusNode();\n  final FocusNode _confirmPasswordFocus = FocusNode();\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      backgroundColor: ColorResources.getCardBgColor(context),\n      body: Column(\n        children: [\n          _buildHeaderDraw(context),\n          Expanded(\n            child: SingleChildScrollView(\n              physics: BouncingScrollPhysics(),\n              child: Center(\n                child: SizedBox(\n                  width: 1170,\n                  child: Consumer<AuthProvider>(\n                    builder: (context, auth, child) {\n                      return Column(\n                        children: [\n                          // SizedBox(height: 55),\n                          // Image.asset(Images.close_lock, width: 142, height: 142, color: Theme.of(context).primaryColor),\n                          // SizedBox(height: 40),\n                          // Center(\n                          //     child: Text(\n                          //   getTranslated('please_enter_your_number_to', context),\n                          //   textAlign: TextAlign.center,\n                          //   style: poppinsRegular.copyWith(color: ColorResources.getHintColor(context)),\n                          // )),\n                          Padding(\n                            padding: const EdgeInsets.all(\n                                Dimensions.PADDING_SIZE_LARGE),\n                            child: Column(\n                              crossAxisAlignment: CrossAxisAlignment.start,\n                              children: [\n                                SizedBox(height: 40),\n                                CustomTextField(\n                                  labelText: 'Wachtwoord',\n                                  hintText: '********',\n                                  isShowBorder: true,\n                                  isPassword: true,\n                                  focusNode: _passwordFocus,\n                                  nextFocus: _confirmPasswordFocus,\n                                  isShowSuffixIcon: true,\n                                  inputAction: TextInputAction.next,\n                                  controller: _passwordController,\n                                ),\n                                SizedBox(height: Dimensions.PADDING_SIZE_SMALL),\n                                CustomTextField(\n                                  labelText: 'Wachtwoord opnieuw',\n                                  hintText: '********',\n                                  isShowBorder: true,\n                                  isPassword: true,\n                                  isShowSuffixIcon: true,\n                                  focusNode: _confirmPasswordFocus,\n                                  controller: _confirmPasswordController,\n                                  inputAction: TextInputAction.done,\n                                ),\n                                SizedBox(height: 24),\n                                CustomSecondaryButton(\n                                  text: 'Opslaan',\n                                  color: Config.PrimaryColor,\n                                  isLoading: auth.isForgotPasswordLoading,\n                                  onPress: () {\n                                    String _password =\n                                        _passwordController.text.trim();\n                                    String _confirmPassword =\n                                        _confirmPasswordController.text.trim();\n                                    if (_password.isEmpty) {\n                                      showCustomSnackBar(\n                                          getTranslated(\n                                              'enter_new_password', context),\n                                          context);\n                                    } else if (_password.length < 6) {\n                                      showCustomSnackBar(\n                                          getTranslated(\n                                              'password_should_be', context),\n                                          context);\n                                    } else if (_confirmPassword.isEmpty) {\n                                      showCustomSnackBar(\n                                          getTranslated(\n                                              'confirm_new_password', context),\n                                          context);\n                                    } else if (_password != _confirmPassword) {\n                                      showCustomSnackBar(\n                                          getTranslated(\n                                              'password_did_not_match',\n                                              context),\n                                          context);\n                                    } else {\n                                      auth\n                                          .resetPassword(resetToken, _password,\n                                              _confirmPassword)\n                                          .then((value) {\n                                        if (value.isSuccess) {\n                                          auth\n                                              .login(email, _password)\n                                              .then((value) {\n                                            Navigator.pushNamedAndRemoveUntil(\n                                                context,\n                                                RouteHelper.menu,\n                                                (route) => false);\n                                          });\n                                        } else {\n                                          showCustomSnackBar(\n                                              value.message, context);\n                                        }\n                                      });\n                                    }\n                                  },\n                                ),\n                              ],\n                            ),\n                          ),\n                        ],\n                      );\n                    },\n                  ),\n                ),\n              ),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildHeaderDraw(BuildContext context) {\n    return Stack(\n      alignment: Alignment.topCenter,\n      children: [\n        Container(\n            height: MediaQuery.of(context).size.height * .22,\n            color: Color(0xffa0dbe6)),\n        SvgPicture.asset('assets/image/logo.svg',\n            width: MediaQuery.of(context).size.width * .43, fit: BoxFit.cover),\n      ],\n    );\n  }\n}\n"
        }
    ]
}